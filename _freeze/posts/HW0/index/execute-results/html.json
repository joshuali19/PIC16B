{
  "hash": "52f60a1cf5e43c8e525595938b105e02",
  "result": {
    "markdown": "---\ntitle: HW0\nauthor: Joshua Li\ndate: '2023-01-23'\ncategories:\n  - code\n  - analysis\n---\n\nThis post will go through the basics of creating a descriptive data visualization step-by-step. By the end of this post, you will be able to\n\n1. decide the data to visualize\n2. determine the best fit for visualizing said data\n3. create a basic visualization\n4. label the visualization effectively\n5. subset by different groups\n6. extract insights from the visualization\n\n## Preprocessing\n\nFirst, in order to create the visualization, we need the proper data to visualize. For this post, we will be using a dataset regarding penguins, given from a specified website referenced within the code.\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport numpy as np\nurl = \"https://raw.githubusercontent.com/PhilChodrow/PIC16B/master/datasets/palmer_penguins.csv\"\npenguins = pd.read_csv(url)\n```\n:::\n\n\nWhen looking to create a good data visualization, it is essential to look at the data to get a good sense of what you are working with.\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nprint(penguins.shape)\npenguins.head()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n(344, 17)\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>studyName</th>\n      <th>Sample Number</th>\n      <th>Species</th>\n      <th>Region</th>\n      <th>Island</th>\n      <th>Stage</th>\n      <th>Individual ID</th>\n      <th>Clutch Completion</th>\n      <th>Date Egg</th>\n      <th>Culmen Length (mm)</th>\n      <th>Culmen Depth (mm)</th>\n      <th>Flipper Length (mm)</th>\n      <th>Body Mass (g)</th>\n      <th>Sex</th>\n      <th>Delta 15 N (o/oo)</th>\n      <th>Delta 13 C (o/oo)</th>\n      <th>Comments</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>PAL0708</td>\n      <td>1</td>\n      <td>Adelie Penguin (Pygoscelis adeliae)</td>\n      <td>Anvers</td>\n      <td>Torgersen</td>\n      <td>Adult, 1 Egg Stage</td>\n      <td>N1A1</td>\n      <td>Yes</td>\n      <td>11/11/07</td>\n      <td>39.1</td>\n      <td>18.7</td>\n      <td>181.0</td>\n      <td>3750.0</td>\n      <td>MALE</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>Not enough blood for isotopes.</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>PAL0708</td>\n      <td>2</td>\n      <td>Adelie Penguin (Pygoscelis adeliae)</td>\n      <td>Anvers</td>\n      <td>Torgersen</td>\n      <td>Adult, 1 Egg Stage</td>\n      <td>N1A2</td>\n      <td>Yes</td>\n      <td>11/11/07</td>\n      <td>39.5</td>\n      <td>17.4</td>\n      <td>186.0</td>\n      <td>3800.0</td>\n      <td>FEMALE</td>\n      <td>8.94956</td>\n      <td>-24.69454</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>PAL0708</td>\n      <td>3</td>\n      <td>Adelie Penguin (Pygoscelis adeliae)</td>\n      <td>Anvers</td>\n      <td>Torgersen</td>\n      <td>Adult, 1 Egg Stage</td>\n      <td>N2A1</td>\n      <td>Yes</td>\n      <td>11/16/07</td>\n      <td>40.3</td>\n      <td>18.0</td>\n      <td>195.0</td>\n      <td>3250.0</td>\n      <td>FEMALE</td>\n      <td>8.36821</td>\n      <td>-25.33302</td>\n      <td>NaN</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>PAL0708</td>\n      <td>4</td>\n      <td>Adelie Penguin (Pygoscelis adeliae)</td>\n      <td>Anvers</td>\n      <td>Torgersen</td>\n      <td>Adult, 1 Egg Stage</td>\n      <td>N2A2</td>\n      <td>Yes</td>\n      <td>11/16/07</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>NaN</td>\n      <td>Adult not sampled.</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>PAL0708</td>\n      <td>5</td>\n      <td>Adelie Penguin (Pygoscelis adeliae)</td>\n      <td>Anvers</td>\n      <td>Torgersen</td>\n      <td>Adult, 1 Egg Stage</td>\n      <td>N3A1</td>\n      <td>Yes</td>\n      <td>11/16/07</td>\n      <td>36.7</td>\n      <td>19.3</td>\n      <td>193.0</td>\n      <td>3450.0</td>\n      <td>FEMALE</td>\n      <td>8.76651</td>\n      <td>-25.32426</td>\n      <td>NaN</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nSince this is not necessarily a data cleaning post, I will not explain too much about what to look out for, but the code will be provided for you to look through.\n\n::: {.cell execution_count=3}\n``` {.python .cell-code code-fold=\"true\"}\n# change the species column\npenguins['Species'] = penguins['Species'].str.split().str.get(0)\n# drop NAs corresponding to culmen length or depth\np_cleaned = penguins.dropna(subset=['Culmen Length (mm)', 'Culmen Depth (mm)'])\n\np_cleaned = p_cleaned[p_cleaned.Sex != '.'] # other data cleaning\n\n# subset by useful data\npenguins = p_cleaned[['Species',\n'Culmen Length (mm)',\n   'Culmen Depth (mm)',\n   'Flipper Length (mm)',\n   'Body Mass (g)',\n   'Delta 15 N (o/oo)',\n   'Delta 13 C (o/oo)']]\n```\n:::\n\n\nOnce you have clean data, you can move on to the visualization process. \n\n## Visualization\n\n### 1. Decide on what data you want to visualize\n\nIt may be helpful to look at some bivariate summary statistics to help gauge any particular interest with specific variables. This will avoid unnecessary time looking at uninformative visualizations.\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\n# creates summary statistics of numeric variables by species\npenguins.groupby(['Species']).aggregate([np.mean, np.std])\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead tr th {\n        text-align: left;\n    }\n\n    .dataframe thead tr:last-of-type th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr>\n      <th></th>\n      <th colspan=\"2\" halign=\"left\">Culmen Length (mm)</th>\n      <th colspan=\"2\" halign=\"left\">Culmen Depth (mm)</th>\n      <th colspan=\"2\" halign=\"left\">Flipper Length (mm)</th>\n      <th colspan=\"2\" halign=\"left\">Body Mass (g)</th>\n      <th colspan=\"2\" halign=\"left\">Delta 15 N (o/oo)</th>\n      <th colspan=\"2\" halign=\"left\">Delta 13 C (o/oo)</th>\n    </tr>\n    <tr>\n      <th></th>\n      <th>mean</th>\n      <th>std</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>mean</th>\n      <th>std</th>\n      <th>mean</th>\n      <th>std</th>\n    </tr>\n    <tr>\n      <th>Species</th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>Adelie</th>\n      <td>38.791391</td>\n      <td>2.663405</td>\n      <td>18.346358</td>\n      <td>1.216650</td>\n      <td>189.953642</td>\n      <td>6.539457</td>\n      <td>3700.662252</td>\n      <td>458.566126</td>\n      <td>8.859733</td>\n      <td>0.426217</td>\n      <td>-25.804194</td>\n      <td>0.588186</td>\n    </tr>\n    <tr>\n      <th>Chinstrap</th>\n      <td>48.833824</td>\n      <td>3.339256</td>\n      <td>18.420588</td>\n      <td>1.135395</td>\n      <td>195.823529</td>\n      <td>7.131894</td>\n      <td>3733.088235</td>\n      <td>384.335081</td>\n      <td>9.356155</td>\n      <td>0.368720</td>\n      <td>-24.546542</td>\n      <td>0.238809</td>\n    </tr>\n    <tr>\n      <th>Gentoo</th>\n      <td>47.529508</td>\n      <td>3.082386</td>\n      <td>14.976230</td>\n      <td>0.983084</td>\n      <td>217.188525</td>\n      <td>6.511696</td>\n      <td>5077.663934</td>\n      <td>505.862403</td>\n      <td>8.247026</td>\n      <td>0.264909</td>\n      <td>-26.185305</td>\n      <td>0.540793</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nWithin this table, I look for any distinct differences that might differentiate certain groups of penguins from others. This can be done with any type of grouping (with `Island` and any other categorical variable).\n\nWe see that within each sex, there seems to be a clear distinction with Adelie penguins from the other two species with regard to `Culmen Length`. We also see this similar distinction with Gentoo penguins and the other two with regards to `Culmen Depth`.\n\nI would encourage you to form more tables if you would like to find more insights, but for the purposes of this demonstration, this is sufficient information to create a visualization based on `Culmen Length` and `Culmen Depth`.\n\n### 2. What is the best type of visualization (for your data)?\n\nObjectively, the best visualization is a pie chart (just kidding). Each type of visualization serves its own purpose given the type of data you want to visualize. Here are some pointers for which visualization to use for different data.\n\n#### Scatter plots\n\nScatter plots are most useful with two continuous variables, as it seeks to plot points within a 2-dimensional grid. This will match what we want to visualize with `Culmen Length (mm)` and `Culmen Depth (mm)`.\n\n#### Bar plots, box plots\n\nBoth bar and box plots are most useful when you are graphing a continuous variable with a categorical variable. One of the axis will denote the categories, while the other will display the length (or spread) corresponding to the continuous variable.\n\n#### Tables\nThese are helpful with categorical data, seeing if there is any correlation, or displays the relative frequency of the data.\n\n#### Histograms\nThis is helpful in a univariate and bivariate setting. Both display the data in sets of bins that will display the distribution of data among those points. The data can be discrete or continuous, but the axes will always be coerced to categorical bins.\n\nThere are a bunch of different plot types, which I will not go more in depth about, but please explore on the official documentation of [`matplotlib`](https://matplotlib.org/stable/plot_types/index.html), [`plotly`](https://plotly.com/python-api-reference/plotly.express.html) or any other plotting software that you might use.\n\n### 3. Create your visualization\nFor this example, we will use `matplotlib` to create my visualization. As stated above, we will use a scatter plot to display this information. The necessary parameters for a scatter plot are the data that will into the x and the y axis.\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\nfrom matplotlib import pyplot as plt\n\n# create a scatter plot by culmen length and culmen depth\nfig, ax = plt.subplots(1)\nax.scatter(penguins['Culmen Length (mm)'], penguins['Culmen Depth (mm)'])\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-6-output-1.png){width=566 height=411}\n:::\n:::\n\n\nThis fulfills the requirement of plotting. However, if someone was given this visualization, it would be completely uninformative. What are the axes measuring? In what unit? What does each point represent? We need to add some informative labels and narrative text that best describes this.\n\n### 4. Label the visualization\n\n::: {.cell execution_count=6}\n``` {.python .cell-code}\n# create a scatter plot by culmen length and culmen depth\nfig, ax = plt.subplots(1)\nax.scatter(penguins['Culmen Length (mm)'], penguins['Culmen Depth (mm)'])\n\n# add labels\nax.set(xlabel = 'Culmen Length (mm)', ylabel = 'Culmen Depth (mm)',\ntitle = \"Relationship between Penguin Culmen Depth and Length\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-7-output-1.png){width=585 height=449}\n:::\n:::\n\n\nNice! We have some points on a grid that represent `Culmen Length` and `Culmen Depth`. What does this visualization tell us about the relationship between the two variables? At a first glance, it seems like there is no real indicator of any correlation between the two. Recall the information that we learned about from the summary statistics. There were differences seen when separated by the `Species`. Let us implement the first through some color contrast, which can be done through adding parameters to the `plt.scatter()` function.\n\n### 5. Subset the data by groups\n\n::: {.cell execution_count=7}\n``` {.python .cell-code}\n# create a scatter plot by culmen length and culmen depth\nfig, ax = plt.subplots(1)\n# for each species, map out the culmen length/depth of each penguin\nfor speci in penguins['Species'].unique():\n    ax.scatter(penguins['Culmen Length (mm)'][penguins['Species'] == speci],\n     penguins['Culmen Depth (mm)'][penguins['Species'] == speci])\n\n# add labels\nax.set(xlabel = 'Culmen Length (mm)', ylabel = 'Culmen Depth (mm)',\ntitle = \"Relationship between Penguin Culmen Depth and Length\")\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-8-output-1.png){width=585 height=449}\n:::\n:::\n\n\nHow do we know which color corresponds to each species? We now need to add a legend.\n\n::: {.cell execution_count=8}\n``` {.python .cell-code}\n# create a scatter plot by culmen length and culmen depth\nfig, ax = plt.subplots(1)\n# for each species, map out the culmen length/depth of each penguin\nfor speci in penguins['Species'].unique():\n    ax.scatter(penguins['Culmen Length (mm)'][penguins['Species'] == speci],\n     penguins['Culmen Depth (mm)'][penguins['Species'] == speci],\n     label = speci) # added label to specify each species\n\n# add labels\nax.set(xlabel = 'Culmen Length (mm)', ylabel = 'Culmen Depth (mm)',\ntitle = \"Relationship between Penguin Culmen Depth and Length\")\n\n# adds a legend, which automatically is displayed if \"label\" is set in ax.scatter\nax.legend()\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](index_files/figure-html/cell-9-output-1.png){width=585 height=449}\n:::\n:::\n\n\n### 6. How does this inform people?\nGreat! You have now created your first data visualization! However, a pretty visualization means nothing unless you can draw insight out of it. How does this visualization help further your analysis? How would the readers interpret this graphic?\n\nIn this example, we have visualized the relationship between `Culmen Length` and `Culmen Depth` for penguins by species. The clustering within each group suggests that there may be some boundaries (with error) that could accurately assess the species of a penguin through these two traits. This can lead down the path of creating more visualizations to be exhaustive with your search, or to perhaps create a model.\n\n## Conclusion\nThrough this post, you have learned how to create a visualization. I would highly encourage you to explore more of this Palmer penguins data set. Experiment with different columns and plot types to see what other insights you can extract and share with the world!\n\n",
    "supporting": [
      "index_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}